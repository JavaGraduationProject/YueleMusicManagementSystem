webpackJsonp([3],{"2yuk":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={components:{suiPhoto:s("l4me").default},name:"sysUserForm",data:function(){return{dialog:{title:"",open:!1,disabled:!1},sysUser:{photo:"",loginName:"",prePassword:"",password:""},rules:{photo:[{required:!0,message:"请输入用户头像",trigger:"blur"}],loginName:[{required:!0,message:"请输入登录名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],prePassword:[{required:!0,message:"请输入确认密码",trigger:"blur"}]}}},methods:{open:function(e){this.showDialog(e.title,!1)},cancel:function(){this.dialog.open=!1},submitRegister:function(e){var t=this,s=this;s.$refs[e].validate(function(e){if(e){if(s.sysUser.password!=s.sysUser.prePassword)return t.showWarn("两次密码不一致!"),!1;s.$request.doPost("/api/login/register",s.sysUser).then(function(e){e.isOk?(s.dialog.open=!1,s.showSuccess("注册成功"),s.$emit("reloadList")):s.showWarn(e.info)})}})},showDialog:function(e,t){this.resetForm(this.$refs.sysUserForm),this.dialog.open=!0,this.dialog.title=e,this.dialog.disabled=t}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{staticStyle:{"margin-top":"200px","text-align":"center"},attrs:{title:e.dialog.title,center:"",width:"500px",visible:e.dialog.open},on:{"update:visible":function(t){return e.$set(e.dialog,"open",t)}}},[s("el-form",{ref:"sysUserForm",attrs:{model:e.sysUser,rules:e.rules,"label-width":"100px"}},[s("el-form-item",[s("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入登录名",disabled:e.dialog.disabled},model:{value:e.sysUser.loginName,callback:function(t){e.$set(e.sysUser,"loginName",t)},expression:"sysUser.loginName"}})],1),e._v(" "),s("el-form-item",[s("el-input",{staticStyle:{width:"217px"},attrs:{type:"password",placeholder:"请输入密码",disabled:e.dialog.disabled},model:{value:e.sysUser.password,callback:function(t){e.$set(e.sysUser,"password",t)},expression:"sysUser.password"}})],1),e._v(" "),s("el-form-item",[s("el-input",{staticStyle:{width:"217px"},attrs:{type:"password",placeholder:"请输入确认密码",disabled:e.dialog.disabled},model:{value:e.sysUser.prePassword,callback:function(t){e.$set(e.sysUser,"prePassword",t)},expression:"sysUser.prePassword"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),e.dialog.disabled?e._e():s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitRegister("sysUserForm")}}},[e._v("提 交")])],1)],1)},staticRenderFns:[]};var r=s("VU/8")(i,o,!1,function(e){s("dT35")},"data-v-f2cb2bbc",null);t.default=r.exports},"37Xf":function(e,t){},UEzk:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Dd8w"),o=s.n(i),r=s("NYxO"),a={components:{register:s("2yuk").default},data:function(){return{roleList:[],editForm:{roleName:"",loginName:"",password:""}}},computed:{showRoles:function(){var e=this.$global.CONFIG.showRoles;return this.editForm.roleName=e?"管理员":"",e},showRegister:function(){return this.$global.CONFIG.showRegister},formHeight:function(){return this.showRoles?350:320}},mounted:function(){this.getRoleList()},methods:o()({},Object(r.b)(["commitConfig","commitDictList","commitNoticeList","commitLoginInfo"]),{register:function(){this.$refs.registerDialog.open({title:"用户注册"})},initData:function(){var e=this,t=this.$loading({lock:!0,text:"请稍后,登录中...",spinner:"el-icon-loading",background:"rgba(0,0,0,0.25)"});this.commitConfig().then(function(s){e.commitDictList().then(function(s){e.commitLoginInfo().then(function(s){var i=e.$store.getters;console.log("getters:",i),e.goHomePage(),t.close()})})})},goHomePage:function(){this.$router.push("/main")},login:function(){this.subLogin()},getRoleList:function(){var e=this;e.$request.doGet("/api/sys/getRoleList").then(function(t){t.isOk&&(e.roleList=t.list)})},subLogin:function(){var e=this;this.$request.doPost("/api/login/userLogin",this.editForm).then(function(t){t.isOk?(e.initData(),e.showSuccess(t.info)):e.showWarn(t.info)})}})},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("title",[e._v("111")]),e._v(" "),s("register",{ref:"registerDialog"}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"login-form",style:"height:"+e.formHeight+"px"},[s("div",{staticClass:"project-name",staticStyle:{"text-shadow":"1px 1px 3px rgba(43,74,120,0.52)"}},[e._v(e._s(e.$global.PROJECT_NAME))]),e._v(" "),s("el-form",{ref:"editForm",attrs:{model:e.editForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[s("div",{staticClass:"login-input"},[s("el-input",{attrs:{placeholder:"请输入登录名"},model:{value:e.editForm.loginName,callback:function(t){e.$set(e.editForm,"loginName",t)},expression:"editForm.loginName"}})],1),e._v(" "),s("div",{staticClass:"login-input"},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1),e._v(" "),e.showRoles?s("div",{staticClass:"login-input",staticStyle:{"text-align":"center"}},[s("el-radio-group",{model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}},e._l(e.roleList,function(t){return s("el-radio",{key:t.roleName,attrs:{label:t.roleName}},[e._v(e._s(t.roleName))])}),1)],1):e._e(),e._v(" "),s("div",{staticClass:"login-input"},[e.showRegister?s("span",{staticClass:"register-span"},[s("small",[e._v("没有账号?  ")]),s("a",{staticClass:"register-a",on:{click:function(t){return e.register()}}},[e._v("立即注册")])]):e._e(),e._v(" "),s("el-button",{class:[{"btn-top":!(e.showRegister||e.showRoles)}],staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)])],1)])],1)},staticRenderFns:[]};var n=s("VU/8")(a,l,!1,function(e){s("37Xf")},"data-v-c04df7be",null);t.default=n.exports},dT35:function(e,t){}});
//# sourceMappingURL=3.9a816a6426b5b216fee4.js.map